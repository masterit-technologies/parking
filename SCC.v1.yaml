openapi: 3.0.0
info:
  title: MasterIT Parkování v Pardubicích
  version: '1.0'
  description: API pro podporu parkovací aplikace
  contact: {}
  license:
    name: MasterIT technologies a.s.
servers:
  - url: 'https://parking.masterit.cz'
    description: parking
paths:
  /api/app/mob/parking/zones:
    get:
      summary: GetMobParkingZones
      tags:
        - parking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResult'
              examples:
                OK:
                  value:
                    status: ok
                    err_msg: ''
                    err_code: 0
                    data:
                      - devID: PRD.PRK.LOK-LI-1-1
                        deviceName: Pernštýnské nám.
                        position:
                          lat: 50.0387059640663
                          lng: 15.7796770334244
                        data:
                          free: 18
                          paid: 6
                          total: 30
                          unknown: 0
                          occupied: 12
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 1
                          cityID: CZE555134
                          zoneID: 1
                          isPublic: true
                          photo_url: ''
                          locationID: 20
                          zoneNumber: LI/1/1
                          showViolation: true
                          maxParkingTime: ''
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                              data:
                                - day: po - ne a sv.
                                  time: '07:00 - 20:00'
                                  minPrice: 25
                                  firstPeriod: 50
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                                - 6
                        deviceClass: ParkingZone
                        zoneID: li-1-1
                        ticketID: automat-1
                      - devID: PRD.PRK.LOK-LI-7-9
                        deviceName: U Mlýnů
                        position:
                          lat: 50.0418307767515
                          lng: 15.7813775539398
                        data:
                          free: 31
                          paid: 9
                          total: 46
                          unknown: 1
                          occupied: 14
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 2
                          cityID: CZE555134
                          zoneID: 8
                          isPublic: true
                          photo_url: ''
                          locationID: 14
                          zoneNumber: LI/7/9
                          showViolation: true
                          maxParkingTime: ''
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                                - id: nextPeriod
                                  label: Další hodina
                              data:
                                - day: po - pá
                                  time: '07:00 - 18:00'
                                  minPrice: 10
                                  firstPeriod: 10
                                  nextPeriod: 20
                                - day: so
                                  time: '07:00 - 12:00'
                                  minPrice: 10
                                  firstPeriod: 10
                                  nextPeriod: 20
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                        deviceClass: ParkingZone
                        zoneID: li-7-9
                        ticketID: automat-7
                      - devID: PRD.PRK.LOK-LIV-27
                        deviceName: K Polabinám II.
                        position:
                          lat: 50.0370762161796
                          lng: 15.7662498950958
                        data:
                          free: 4
                          paid: 4
                          total: 35
                          unknown: 0
                          occupied: 31
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 3
                          cityID: CZE555134
                          zoneID: 25
                          isPublic: true
                          photo_url: ''
                          locationID: 36
                          zoneNumber: LIV/27
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                                - id: nextPeriod
                                  label: Další hodina
                              data:
                                - day: po - pá
                                  time: '06:00 - 22:00'
                                  minPrice: 10
                                  firstPeriod: 20
                                  nextPeriod: 40
                                - day: so
                                  time: '07:00 - 12:00'
                                  minPrice: 10
                                  firstPeriod: 20
                                  nextPeriod: 40
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                        deviceClass: ParkingZone
                        zoneID: liv
                        ticketID: automat-10
                      - devID: PRD.PRK.LOK-LIV-33
                        deviceName: nábřeží Závodu míru VI.
                        position:
                          lat: 50.0370383592907
                          lng: 15.7563310861588
                        data:
                          free: 0
                          total: 0
                          unknown: 0
                          occupied: 0
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 3
                          cityID: CZE555134
                          zoneID: 31
                          isPublic: true
                          photo_url: ''
                          locationID: 35
                          zoneNumber: LIV/33
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                                - id: nextPeriod
                                  label: Další hodina
                              data:
                                - day: po - pá
                                  time: '06:00 - 22:00'
                                  minPrice: 10
                                  firstPeriod: 20
                                  nextPeriod: 40
                                - day: so
                                  time: '07:00 - 12:00'
                                  minPrice: 10
                                  firstPeriod: 20
                                  nextPeriod: 40
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                        deviceClass: ParkingZone
                        zoneID: liv
                        ticketID: automat-10
                      - devID: PRD.PRK.LOK-LII-60
                        deviceName: Na Třísle
                        position:
                          lat: 50.039534521739135
                          lng: 15.780782
                        data:
                          free: 2
                          paid: 3
                          total: 23
                          unknown: 0
                          occupied: 21
                          reserved: 1
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 1
                        config:
                          areaID: 1
                          cityID: CZE555134
                          zoneID: 58
                          isPublic: true
                          photo_url: ''
                          locationID: 17
                          zoneNumber: LII/60
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                                - id: nextPeriod
                                  label: Další hodina
                              data:
                                - day: po - pá
                                  time: '06:00 - 22:00'
                                  minPrice: 15
                                  firstPeriod: 30
                                  nextPeriod: 40
                                - day: so
                                  time: '07:00 - 12:00'
                                  minPrice: 15
                                  firstPeriod: 30
                                  nextPeriod: 40
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                        deviceClass: ParkingZone
                        zoneID: lii
                        ticketID: automat-8
                      - devID: PRD.PRK.LOK-LI-6-11
                        deviceName: Tyršovo nábřeží II.
                        position:
                          lat: 50.0359941679685
                          lng: 15.782675743103
                        data:
                          free: 4
                          paid: 10
                          total: 26
                          unknown: 0
                          occupied: 22
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 2
                          cityID: CZE555134
                          zoneID: 10
                          isPublic: true
                          photo_url: ''
                          locationID: 8
                          zoneNumber: LI/6/11
                          showViolation: true
                          maxParkingTime: ''
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                                - id: nextPeriod
                                  label: Další hodina
                              data:
                                - day: po - pá
                                  time: '07:00 - 18:00'
                                  minPrice: 10
                                  firstPeriod: 20
                                  nextPeriod: 40
                                - day: so
                                  time: '07:00 - 12:00'
                                  minPrice: 10
                                  firstPeriod: 20
                                  nextPeriod: 40
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                        deviceClass: ParkingZone
                        zoneID: li-6
                        ticketID: automat-6
                      - devID: PRD.PRK.LOK-OUT-A
                        deviceName: Atrium Palace
                        position:
                          lat: 50.037830815029565
                          lng: 15.768293735909339
                        data:
                          free: 463
                          total: 651
                          unknown: 0
                          occupied: 188
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 4
                          cityID: CZE555134
                          zoneID: 1
                          isPublic: true
                          photo_url: ''
                          locationID: 2
                          zoneNumber: ATR
                          showViolation: false
                          maxParkingTime: ''
                          street_view_url: ''
                        deviceClass: ParkingZone
                      - devID: PRD.PRK.LOK-LII-49
                        deviceName: Bratranců Veverkových II.
                        position:
                          lat: 50.03386754545456
                          lng: 15.772212545454543
                        data:
                          free: 6
                          paid: 3
                          total: 22
                          unknown: 0
                          occupied: 16
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 1
                          cityID: CZE555134
                          zoneID: 47
                          isPublic: true
                          photo_url: ''
                          locationID: 31
                          zoneNumber: LII/49
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                                - id: nextPeriod
                                  label: Další hodina
                              data:
                                - day: po - pá
                                  time: '06:00 - 22:00'
                                  minPrice: 15
                                  firstPeriod: 30
                                  nextPeriod: 40
                                - day: so
                                  time: '07:00 - 12:00'
                                  minPrice: 15
                                  firstPeriod: 30
                                  nextPeriod: 40
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                        deviceClass: ParkingZone
                        zoneID: lii
                        ticketID: automat-8
                      - devID: PRD.PRK.LOK-LI-4-4
                        deviceName: nábř. Václava Havla II.
                        position:
                          lat: 50.0420857644624
                          lng: 15.7707667350769
                        data:
                          free: 51
                          paid: 2
                          total: 55
                          unknown: 0
                          occupied: 4
                          reserved: 0
                          reservedFree: 0
                          reservedUnknown: 0
                          reservedOccupied: 0
                        config:
                          areaID: 1
                          cityID: CZE555134
                          zoneID: 4
                          isPublic: true
                          photo_url: ''
                          locationID: 22
                          zoneNumber: LI/4/4
                          showViolation: true
                          maxParkingTime: ''
                          street_view_url: ''
                          priceList:
                            - header:
                                - id: day
                                  label: Den
                                - id: time
                                  label: Čas
                                - id: minPrice
                                  label: Minimální cena
                                - id: firstPeriod
                                  label: První hodina
                              data:
                                - day: po - pá
                                  time: '07:00 - 19:00'
                                  minPrice: 5
                                  firstPeriod: 10
                                - day: so
                                  time: '07:00 - 12:00'
                                  minPrice: 5
                                  firstPeriod: 10
                              freeTime: 5
                              divisibility: 30
                              days:
                                - 0
                                - 1
                                - 2
                                - 3
                                - 4
                                - 5
                        deviceClass: ParkingZone
                        zoneID: li-4
                        ticketID: automat-4
      operationId: get-api-app-mob-parking-zones
      description: Vrací seznam parkovacích zón pro mobilní aplikaci parkování
      parameters:
        - schema:
            type: string
            default: application/json
          in: header
          name: Content-Type
          required: true
        - schema:
            type: string
          in: query
          name: cityID
          description: id měst oddělených čárkou
        - schema:
            type: string
          in: query
          name: validSince
          description: 'unix epoch čas posledních platných dat u klienta, data jsou vrácena pouze v případě, že došlo od té doby ke změně, jinak null'
        - schema:
            type: string
          in: query
          name: placeTypes
          description: seznam typů parkovacích míst oddělených čárkou
        - schema:
            type: string
          in: query
          name: locale
          description: jazyková mutace
        - schema:
            type: string
          in: query
          name: vehicleTypes
          description: seznam typů vozidel oddělených čárkou
        - schema:
            type: string
          in: query
          name: engineTypes
          description: seznam motorizací oddělených čárkou
      security:
        - Bearer token: []
  /api/anonymousLogin:
    post:
      summary: PostAnonymousLogin
      operationId: post-api-anonymousLogin
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: {}
              examples:
                úspěšné přihlášení/registrace:
                  value:
                    status: ok
                    err_msg: ''
                    err_code: 0
                    data:
                      access_token: access token
                      token_type: bearer
                      expires_in: 604799
                      user:
                        recID: 16
                        sccID: 1
                        userApp: parking
                        installationID: sa854dsa4d5sa4875d4sa54d
                      refresh_token: nový refresh token
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResult'
              examples:
                Chybný refresh token:
                  value:
                    status: error
                    err_msg: Uživatelské heslo není správné
                    err_code: -3002
                    data: null
      description: API provede přihlášení anonymního uživatele
      parameters:
        - schema:
            type: string
          in: header
          name: Content-Type
          description: application/json
      requestBody:
        content:
          application/json:
            schema:
              type: object
            examples:
              1. přihlášení:
                value:
                  installationID: sa854dsa4d5sa4875d4sa54d
                  application: parking
              Přihlášení refreshTokenem:
                value:
                  installationID: sa854dsa4d5sa4875d4sa54d
                  application: parking
                  refreshToken: a437f6e7-d643-4aa2-b87e-8f1a384773374254d7b2-a08d-4ff7-9391-4c59d945e734f47f34d7-61a1-4417-b383-374b45999fd64884c5aa-eb00-414e-a55b-54243f66e21d
        description: ''
    parameters: []
  /api/app/mob/parking/place/list:
    get:
      summary: GetMobParkingPlacesAuth
      tags:
        - parking
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/APIResult'
              examples:
                OK:
                  value:
                    status: ok
                    err_msg: ''
                    err_code: 0
                    data:
                      - sccID: 1
                        devID: MSK.PRK.PLACE138
                        type: OfflineDevice
                        deviceName: 'Krajský úřad, Ostrava Zóna I, místo 12'
                        config:
                          map:
                            position:
                              lat: 49.8282862904364
                              lng: 18.2705050706863
                            visibility:
                              min: 18
                              max: null
                        configParking:
                          areaID: 1
                          cityID: 554821
                          zoneID: 5
                          placeType: '0'
                          locationID: 2
                          parkingLotID: cz-ostparkingam-parki
                          parkingPlaceID: cz-ostparkingam-parki-p13
                          parkingPlaceType: AND
                        data:
                          state: 1
                          placeType: '0'
                          timestamp: '2020-05-07T07:44:52'
                        class: ParkingPlace
                      - sccID: 1
                        devID: MSK.PRK.PLACE062
                        type: OfflineDevice
                        deviceName: 'Krajský úřad, Ostrava Zóna B, místo 25'
                        config:
                          map:
                            position:
                              lat: 49.8293707067123
                              lng: 18.2698747515678
                            visibility:
                              min: 18
                              max: null
                        configParking:
                          areaID: 1
                          cityID: 554821
                          zoneID: 1
                          placeType: '0'
                          locationID: 2
                          parkingLotID: cz-ostparkingam-parkb
                          parkingPlaceID: cz-ostparkingam-parkb-p25
                          parkingPlaceType: AND
                        data:
                          state: 1
                          placeType: '0'
                          timestamp: '2020-05-07T06:16:01'
                        class: ParkingPlace
                      - {}
                      - {}
      operationId: get-api-app-mob-parking-places
      description: Vrací seznam parkovacích míst města podle cityID
      parameters:
        - schema:
            type: string
            default: application/json
          in: header
          name: Content-Type
          required: true
        - schema:
            type: string
          in: query
          name: cityID
          description: id měst oddělených čárkou
        - schema:
            type: string
          in: query
          name: validSince
          description: 'unix epoch čas posledních platných dat u klienta, data jsou vrácena pouze v případě, že došlo od té doby ke změně, jinak null'
        - schema:
            type: string
          in: query
          name: placeTypes
          description: seznam typů parkovacích míst oddělených čárkou
        - schema:
            type: string
          in: query
          name: vehicleTypes
          description: seznam typů vozidel oddělených čárkou
        - schema:
            type: string
          in: query
          name: engineTypes
          description: seznam motorizací oddělených čárkou
      security:
        - Bearer token: []
    parameters: []
components:
  schemas:
    APIResult:
      title: APIResult
      type: object
      properties:
        status:
          type: string
        err_msg:
          type: string
        err_code:
          type: integer
        data:
          type:
            - 'null'
            - object
      x-examples:
        OK:
          status: ok
          err_msg: ''
          err_code: 0
          data: null
        ERROR:
          status: error
          err_msg: Nedostatečné oprávnění
          err_code: -4000
          data: null
  securitySchemes:
    Bearer token:
      type: http
      scheme: bearer
tags:
  - name: parking
